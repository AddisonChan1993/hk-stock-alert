name: DailyPnL

on:
  schedule:
    - cron: '20 8 * * 1-5'  # ğŸ‡­ğŸ‡° é€¢æ˜ŸæœŸä¸€è‡³äº”ï¼Œé¦™æ¸¯æ™‚é–“ 16:20 åŸ·è¡Œ
  workflow_dispatch:        # ç•€ä½ éš¨æ™‚æ‰‹å‹•æ’³æ£æ¸¬è©¦
  push:
    paths:
      - 'pnl.py'            # åªæœ‰ç•¶ä½ ä¿®æ”¹ pnl.py æ™‚å…ˆæœƒè‡ªå‹• Run ä¸€æ¬¡æ¸¬è©¦

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: pip install yfinance pandas requests

      - name: Run PnL Calculation
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: python pnl.py
